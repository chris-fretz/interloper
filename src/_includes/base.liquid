<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}{% if title != "Steadyfooted" %} | Steadyfooted{% endif %}</title>
    <link rel="stylesheet" href="/css/style.min.css">
    {% if seo_description == "no-index" %}
        <meta name="robots" content="noindex">
    {% else %}
        <meta name="description" content="{{ page_setup.seo_description }}">
    {% endif %}
</head>
<body>
    <script>
        // Check localStorage for a saved theme preference
        const savedTheme = localStorage.getItem('theme');

        // If the saved preference is "light", apply the 'light' class immediately
        if (savedTheme === 'light') {
            document.body.classList.add('light');
        } 
        // Note: If savedTheme is 'dark' or null, no class is added, defaulting to dark mode CSS.
    </script>
    <header>
        <div class="wrap flex f-wrap">
            <a class="logo-link" href="/">Steadyfooted</a>
            <div class="flex f-wrap header-right">
                <div class="icon-container">
                    <button class="icon-btn flex f-center" id="menu-toggle" aria-label="Toggle menu">
                        <span class="fa-solid fa-bars flex f-center"></span>
                    </button>
                </div>
                <nav class="nav">
                    <ul>
                    {% for item in header_menu.menu.items %}
                        <li>
                        <a href="{{ item.url }}" {% if item.new_tab %} target="_blank" rel="noopener noreferrer"{% endif %}>
                            {{ item.link_text }}
                        </a>
                        </li>
                    {% endfor %}
                    </ul>
                </nav>
                <div class="icon-container">
                    <button class="icon-btn flex f-center" id="dark-mode-toggle" aria-label="Toggle dark mode">
                        <span class="fa-solid fa-sun flex f-center"></span>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <main>
        {% # Hero Section %}
        {% assign heroBlock = hero[0] %}
        {%- capture hero_template -%}blocks/{{ heroBlock._block }}.liquid{%- endcapture -%}
        {% include hero_template, block: heroBlock %}
        
        {% # Loop through blocks; build fails if block._block is missing or file doesn't exist {% endcomment %}
        {% for block in blocks %}
            {%- capture template_path -%}blocks/{{ block._block }}.liquid{%- endcapture -%}
            {% include template_path, block: block %}
        {% endfor %}
    </main>
    <footer>
        <div class="wrap flex f-wrap">
            <nav class="nav">
                <ul>
                {% for item in footer_menu.menu.items %}
                    <li>
                    <a href="{{ item.url }}"{% if item.new_tab %} target="_blank" rel="noopener noreferrer"{% endif %}>
                        {{ item.link_text }}
                    </a>
                    </li>
                {% endfor %}
                </ul>
            </nav>
            <p>&copy; 2025 Interloper. All rights reserved.</p>
        </div>
    </footer>
    <script src="https://kit.fontawesome.com/6718c3b0d7.js" crossorigin="anonymous"></script>
    <script src="/js/main.js"></script>
</body>
</html>